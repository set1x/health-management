# 项目路线图

## 项目状态

- [x] 规划前后端项目结构 (完成于 10 月 28 日)
- [x] 整理项目相关文档 (完成于 11 月 8 日)
- [x] 整合前后端仓库 (完成于 11 月 8 日)
- [x] 完善接口文档 (完成于 11 月 10 日)
- [x] 增加项目整体架构设计 (完成于 11 月 10 日)
- [x] 补充各模块截止日期 (完成于 11 月 17 日)
- [x] 实现分页查询的数据导出 (完成于 12 月 6 日)
- [ ] 完成测试覆盖 (截止日期: 12 月 16 日)

## 前端开发

### 功能增加

- [x] 从后端获取真实健康统计数据 (完成于 11 月 11 日)
- [x] 添加记录用户睡眠页面 (完成于 11 月 16 日)

### 样式优化

- [x] 优化进度条颜色和动画 (完成于 11 月 24 日)
- [x] 完善相关图标显示 (完成于 11 月 24 日)

### 测试覆盖

- [x] **单元测试** (完成于 11 月 27 日)
  - [x] 工具函数测试 (完成于 11 月 27 日)
    - dateUtils: 日期格式化、转换
    - metricUtils: BMI 计算、状态判断
    - sse: SSE 流式请求处理
  - [x] Composables 测试 (完成于 12 月 6 日)
    - useAuth: 认证状态管理
    - useAvatar: 头像状态检测与 URL 缓存
    - useECharts: 图表初始化与销毁
    - useExport: CSV 导出功能
    - useSSEConnection: SSE 连接管理、智能重连、指数退避
  - [x] 组件测试 (完成于 11 月 27 日)
    - DatePicker: 日期选择器
    - YearMonthSelect: 年月选择器
    - QuickBodyDataDialog: 快速记录体重
    - QuickDietDialog: 快速记录饮食
    - QuickExerciseDialog: 快速记录运动
    - QuickSleepDialog: 快速记录睡眠
    - CaloriesChart: 卡路里图表
    - WeightChart: 体重图表

- [ ] **集成测试** (截止日期: 12 月 9 日)
  - [x] API 测试 (完成于 11 月 27 日)
  - [ ] E2E 测试 (截止日期: 12 月 9 日)
    - [x] 首页测试 (完成于 11 月 28 日)
      - 页面标题、主标题、描述文字
      - 核心功能列表展示
      - 登录/注册按钮导航
    - [x] 登录/注册页测试 (完成于 11 月 28 日)
      - 表单显示与输入
      - 登录/注册模式切换
      - 性别选择交互
      - 表单填写验证
    - [ ] 仪表板页面测试
    - [ ] 身体数据页面测试
    - [ ] 饮食管理页面测试
    - [ ] 运动管理页面测试
    - [ ] 睡眠数据页面测试

## 后端开发

- [x] 新增用户注册日期字段 (完成于 11 月 11 日)
- [x] 配置代码格式化程序 (完成于 11 月 11 日)
- [x] 优化智能助手所使用的 prompt (完成于 11 月 16 日)
- [x] 新增记录睡眠数据接口 (完成于 11 月 16 日)
- [x] 更新 AI 框架以及模型 (完成于 11 月 25 日)
- [x] 新增供 AI 调用的函数封装 (完成于 11 月 25 日)
- [x] 建立 H2 测试 Profile 并补齐核心单元/切片测试 (完成于 11 月 27 日)
- [ ] 扩展饮食/运动/睡眠模块的 Mapper & Service 测试 (截止日期: 12 月 2 日)
- [x] 为 Body/Diet/Sleep/Exercise Controller 增加 MockMvc 集成测试 (完成于 12 月 16 日)
- [ ] Chat/Ai/WebSearch/Upload 控制器契约测试与超时回退覆盖 (截止日期: 12 月 6 日)

## 更新日志

### 2025-12-16

- 完善后端控制器测试覆盖（Body, Diet, UserProfile）
- 新增 Chat 控制器基础测试

### 2025-12-6

- 新增 AI 聊天 SSE 连接优化
- 实现所有健康数据模块的 CSV 导出功能

### 2025-12-5

- 清理前端代码，补充登录页重置密码的端到端测试

### 2025-12-2

- 修复前端生产版本无法正确代理 API 请求的问题
- 优化智能助手函数调用逻辑
- 优化前端首屏加载时间
- 模块化封装原有模型函数调用逻辑
- 新增密码重置功能

### 2025-11-28

- 完成前端 E2E 测试基础框架搭建
- 添加首页和登录/注册页的 E2E 测试用例
- 修改前端 SSE 使得可以解析连续的 JSON 对象

### 2025-11-27

- 完成前端 API 回归测试
- 后端引入 H2 测试配置与 JWT、密码、拦截器、Mapper、Service、Controller 等核心用例
- 完成前端所有工具函数，Composables 和组件的测试

### 2025-11-25

- 更换智能助手所用模型
- 重构前端 SSE 解析器，保证流式回复按序展示
- 优化调用聊天接口的体验
- 后端引入 HealthDataFunctions 封装健康数据 CRUD 供模型调用
- 新增 WebSearchFunction 与配置开关，支持 AI 联网获取实时资讯

### 2025-11-24

- 调整样式，优化用户体验

### 2025-11-17

- 补充各模块截止日期

### 2025-11-16

- 修复健康助手没有使用所定义的 prompt 的 bug
- 后端新增睡眠记录 CRUD 接口
- 前端完成睡眠管理页面

### 2025-11-15

- 优化 nuxt-icon 加载配置，避免图标在渲染时丢失
- 新增客户端认证插件，自动初始化用户认证状态
- 改进认证中间件和 useAuth 组合式函数
- 简化登录页表单验证逻辑，加强用户体验

### 2025-11-11

- 新增后端用户注册时间字段
- 完善前端健康统计数据获取
- 简化前端 API 转发配置
- 迁移后端构建工具
- 配置后端代码格式化程序并格式化原有代码

### 2025-11-10

- 整理接口文档
- 新增项目架构设计

### 2025-11-08

- 优化文档结构，减少冗余，突出项目核心信息
- 修改提交规范格式为 `类型: 描述`
- 整合前后端仓库

### 2025-11-07

- 初始化路线图以及项目介绍
- 梳理当前项目状态

---

**最后更新于** 2025 年 12 月 18 日
