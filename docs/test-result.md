# 测试结果报告

## 1. 测试用例设计

本系统的测试用例设计遵循分层测试策略，结合多种黑盒测试技术，确保覆盖系统的功能逻辑、边界条件及异常处理。

### 1.1 设计方法

* **等价类划分**: 将输入数据划分为有效等价类（如合法的邮箱格式、正数的卡路里数值）和无效等价类（如错误的邮箱格式、负数或非数字输入），以减少测试用例数量同时保证覆盖率。
* **边界值分析**: 针对输入域的边界进行测试，例如密码长度的最小值、日期的最大值（如未来日期）、数值的零值等，因为错误往往发生在边界处。
* **错误推测**: 基于经验推测可能出现的错误，例如重复注册已存在的邮箱、在未登录状态下直接访问受保护页面、网络中断时的提交操作等。
* **场景分析**: 模拟用户真实的操作流程（User Journey），例如“用户注册 -> 登录 -> 记录饮食 -> 查看仪表盘 -> 退出登录”的完整闭环。
* **判定表驱动**: 针对逻辑组合复杂的场景（如登录认证），列出所有条件的组合（账号存在/不存在、密码正确/错误）及其对应的预期动作。

### 1.2 测试用例表

下表列出了基于上述方法设计的核心测试用例：

| 用例ID | 模块 | 测试场景 | 前置条件 | 测试步骤 | 预期结果 | 实际结果 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **TC-AUTH-001** | 认证 | 正常登录 | 用户已注册 | 1. 进入登录页<br>2. 输入正确邮箱和密码<br>3. 点击登录 | 跳转至首页，显示用户昵称 | ✅ Pass |
| **TC-AUTH-002** | 认证 | 登录失败-密码错误 | 用户已注册 | 1. 输入正确邮箱<br>2. 输入错误密码<br>3. 点击登录 | 提示“用户名或密码错误”，停留在登录页 | ✅ Pass |
| **TC-AUTH-003** | 认证 | 登录失败-账号不存在 | 无 | 1. 输入未注册邮箱<br>2. 输入任意密码<br>3. 点击登录 | 提示“用户名或密码错误” | ✅ Pass |
| **TC-AUTH-004** | 认证 | 注册-邮箱格式校验 | 无 | 1. 邮箱输入 "invalid-email"<br>2. 填写其他必填项<br>3. 点击注册 | 提示邮箱格式不正确，注册按钮不可用或提交失败 | ✅ Pass |
| **TC-AUTH-005** | 认证 | 注册-重复邮箱 | 邮箱已存在 | 1. 输入已注册的邮箱<br>2. 填写有效信息<br>3. 点击注册 | 提示“该邮箱已被注册” | ✅ Pass |
| **TC-DIET-001** | 饮食 | 添加饮食记录-正常 | 已登录 | 1. 进入饮食页面<br>2. 选择早餐，输入"燕麦", 卡路里"300"<br>3. 提交 | 列表显示该条记录，提示保存成功 | ✅ Pass |
| **TC-DIET-002** | 饮食 | 添加饮食记录-数值边界 | 已登录 | 1. 卡路里输入 "0" 或 "-100"<br>2. 提交 | 提示卡路里必须为正数 | ✅ Pass |
| **TC-BODY-001** | 身体 | 录入体重-未来日期 | 已登录 | 1. 选择明天的日期<br>2. 输入体重<br>3. 提交 | 系统应允许或提示确认（视业务规则而定，当前允许） | ✅ Pass |
| **TC-CHAT-001** | AI助手 | 智能建议获取 | 已登录 | 1. 进入聊天页面<br>2. 发送 "我今天吃了汉堡，该怎么运动？" | AI 能够读取饮食记录并给出针对性运动建议 | ✅ Pass |
| **TC-SEC-001** | 安全 | 未授权访问 | 未登录 | 1. 直接访问 `/dashboard` URL | 自动重定向至 `/login` 页面 | ✅ Pass |

---

## 2. 测试计划制定

### 2.1 测试目标

验证 "健康生活管理系统" (Health Life Management System) v1.0 版本的功能完整性、稳定性和用户体验，确保满足发布标准。

### 2.2 测试范围

* **前端**：Vue 3 + Nuxt 应用，重点测试路由导航、组件渲染、表单交互。
* **后端**：Spring Boot 应用，重点测试 RESTful API 接口的正确性和异常处理。

### 2.3 测试环境与工具

* **操作系统**：Windows
* **测试工具**：Chromium 浏览器，Eage 浏览器

### 2.4 执行策略

* **自动化执行**：
  * 前端 E2E 测试配置为并行运行 (`fullyParallel: true`)，以提高执行效率。
  * 后端测试在构建阶段 (`gradle build`) 动触发。
* **失败重试**：CI 环境下配置了重试机制 (`retries: 2`)，以应对网络波动导致的 flaky tests。
* **报告生成**：生成 HTML 格式的测试报告，便于问题追踪。

---

## 3. 测试用例执行

### 执行记录摘要

#### 前端 E2E 测试 (Playwright)

执行命令：`pnpm exec playwright test`

| 测试套件 | 测试用例 | 状态 | 备注 |
| :--- | :--- | :--- | :--- |
| **首页功能测试** (`home.spec.ts`) | 页面应该有正确的标题 | ✅ Pass | 验证 Title 包含 "健康生活管理系统" |
| | 应该显示主标题 | ✅ Pass | H1 标签可见性 |
| | 应该显示描述文字 | ✅ Pass | 验证 Slogan 文本 |
| | 应该显示登录和注册按钮 | ✅ Pass | 验证导航链接 |
| | 应该显示核心功能列表 | ✅ Pass | 验证 7 个核心功能模块标题 |
| **登录页面测试** (`login.spec.ts`) | 应该显示登录表单 | ✅ Pass | 验证输入框和按钮存在 |
| | 应该能够输入邮箱和密码 | ✅ Pass | 验证表单填充功能 |
| | 应该能够切换到注册表单 | ✅ Pass | 验证 URL 参数 `?mode=register` 逻辑 |
| | 点击注册按钮应该切换到注册表单 | ✅ Pass | 验证页面内交互跳转 |

#### 后端 API 测试 (JUnit)

执行命令：`./gradlew test`

| 测试类 | 测试方法 | 状态 | 备注 |
| :--- | :--- | :--- | :--- |
| `HealthLifeApplicationTests` | `contextLoads` | ✅ Pass | Spring 上下文加载正常 |
| `UserControllerTest` | `loginShouldReturnToken...` | ✅ Pass | 登录成功返回 Token |
| | `registerShouldReturnError...` | ✅ Pass | 重复注册返回错误码 |

## 4. 测试结论

经过全面的自动化测试覆盖，系统核心功能（首页展示、用户认证流程）表现稳定。

* **前端**：所有关键 UI 组件渲染正常，交互逻辑符合预期，页面跳转流畅。
* **后端**：API 接口响应正确，能够正确处理业务逻辑和异常情况。

**结论：系统符合发布要求，准予发布。**
